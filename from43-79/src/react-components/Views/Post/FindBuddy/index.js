import React from "react";import { Link } from "react-router-dom";import Button from "@material-ui/core/Button";import Grid from '@material-ui/core/Grid';import Paper from '@material-ui/core/Paper';import Typography from '@material-ui/core/Typography';import "./styles.css";import Header from "../../../Header";import PostFilter from "../PostFilter";import {findMyPosts, findPosts, viewPosts, getAllPosts, resetFilters} from "../../../../actions/FindBuddy";import {editFilters} from "../../../../actions/filter";const datetime = require('date-and-time');/* Component for the FindBuddy page */class FindBuddy extends React.Component {    constructor(props) {        super(props);        this.user = this.props.app.state.currentUser;        this.id = this.props.history.location.id ? this.props.history.location.id: 'all';        this.role = this.props.app.state.role;        this.state = {            user: this.user,            posts: [],            view: [],            filters: ['All', 'All', 'All', new Date(), datetime.addYears(new Date(), 1)],            errors: {                type: false,                time: false,                region: false,                theme: false,            }        };    }    componentDidMount() {        getAllPosts(this, this.id);    }    handleChange = event => {        findPosts(this, event.target.name, event.target.value);    };    render() {        return (            <div>                <Header cur="FindBuddy" role={this.role}/>                <PostFilter onChange={this.handleChange}                            role={this.role}                            dates={[this.state.filters[3], this.state.filters[4]]}                            errors={this.state.errors}/>                <div className="post-buttons">                    <Link className="post__button-link" to="/EditPost">                        <Button className="post__button">Post My Trip Plan</Button>                    </Link>                    <Button className="post__button"                            onClick={ () => findMyPosts(this) }>                        View My Posts                    </Button>                    <Button className="post__button"                            onClick={ () => resetFilters(this) }>                        Reset Filters                    </Button>                    {this.role === 'admin' &&                    <Button className="post__button"                            onClick={ () => editFilters(this, 'post') }>                        Edit Filters                    </Button>}                </div>                <div className="posts">                    {this.state.view.map(post => (                        <Grid container justify="center" className="post" key={post._id}>                            <Paper className="posts__paper">                                <Grid item xs={12} sm container>                                    <Grid item xs container direction="column" spacing={2}>                                        <Grid item xs>                                            <Typography gutterBottom variant="subtitle1">                                                Posted by: {post.user.nickName}                                            </Typography>                                            <Typography variant="body2" gutterBottom>                                                Type: {post.type.name}                                            </Typography>                                            <Typography variant="body2" gutterBottom>                                                Start Date: {datetime.format(new Date(post.startDate), 'MMM D YYYY')}                                            </Typography>                                            <Typography variant="body2" gutterBottom>                                                End Date: {datetime.format(new Date(post.endDate), 'MMM D YYYY')}                                            </Typography>                                            <Typography variant="body2" color="textSecondary">                                                Tags: {post.region.name}, {post.theme.name}                                            </Typography>                                            <Typography variant="body1" className="post__details" gutterBottom>                                                {post.briefInfo}                                            </Typography>                                        </Grid>                                        <Grid item className="details">                                            <Button className="details__button"                                                    onClick={ () => viewPosts(this, post) }>                                                View Details                                            </Button>                                        </Grid>                                    </Grid>                                </Grid>                            </Paper>                        </Grid>                    ))}                </div>            </div>        );    }}export default FindBuddy;